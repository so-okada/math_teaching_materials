<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Small Angle Approximation: x ≈ sin(x)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.js"></script>
    <style>
        /* Custom scrollbar for cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #888; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555; 
        }
        .canvas-container {
            position: relative;
            width: 100%;
            height: 300px; /* Base height */
        }
        canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        /* Mathematical font for formulas */
        .math-font {
            font-family: 'Times New Roman', Times, serif;
            font-style: italic;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-indigo-600 text-white p-4 shadow-md z-10">
        <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold tracking-wide">Small Angle Approximation</h1>
            <div class="text-sm opacity-90 mt-2 md:mt-0 math-font text-lg">
                x &approx; sin(x)
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow p-4 md:p-6 w-full max-w-6xl mx-auto">
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            
            <!-- Left Column: Visualizations -->
            <div class="space-y-6">
                
                <!-- Unit Circle Visualization -->
                <div class="bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden">
                    <div class="bg-slate-50 px-4 py-2 border-b border-slate-100 flex justify-between items-center">
                        <h2 class="font-semibold text-slate-700">Unit Circle Visualization</h2>
                        <span class="text-xs bg-slate-200 px-2 py-1 rounded text-slate-500">Radius = 1</span>
                    </div>
                    <div class="canvas-container bg-white relative" id="circle-container">
                        <canvas id="circleCanvas"></canvas>
                        <!-- Legend Overlay -->
                        <div class="absolute top-2 right-2 bg-white/90 p-2 rounded border border-slate-200 text-xs shadow-sm pointer-events-none">
                            <div class="flex items-center mb-1"><div class="w-3 h-3 bg-emerald-500 rounded-full mr-2"></div> Arc (x)</div>
                            <div class="flex items-center"><div class="w-3 h-3 bg-rose-500 rounded-full mr-2"></div> Height (sin x)</div>
                        </div>
                    </div>
                </div>

                <!-- Function Graph Visualization -->
                <div class="bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden">
                    <div class="bg-slate-50 px-4 py-2 border-b border-slate-100">
                        <h2 class="font-semibold text-slate-700">Function Comparison</h2>
                    </div>
                    <div class="canvas-container bg-white" id="graph-container">
                        <canvas id="graphCanvas"></canvas>
                    </div>
                </div>

            </div>

            <!-- Right Column: Controls & Analysis -->
            <div class="space-y-6">
                
                <!-- Controls Card -->
                <div class="bg-white rounded-xl shadow-lg border border-slate-100 p-6">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 border-b pb-2">Control Angle</h3>
                    
                    <div class="mb-6">
                        <label for="angleSlider" class="block text-sm font-medium text-slate-600 mb-2">
                            Angle (<span class="math-font">x</span>) in Radians
                        </label>
                        <input type="range" id="angleSlider" min="-1.5708" max="1.5708" step="0.01" value="0.2" 
                            class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 hover:accent-indigo-500 transition-all">
                        <div class="flex justify-between text-xs text-slate-400 mt-2 font-mono">
                            <span>-π/2 rad</span>
                            <span>0 rad</span>
                            <span>π/2 rad</span>
                        </div>
                    </div>

                    <div class="flex justify-center space-x-2">
                        <button onclick="setAngle(0.1)" class="px-3 py-1 text-xs bg-slate-100 hover:bg-slate-200 rounded text-slate-600 transition">Small (0.1)</button>
                        <button onclick="setAngle(0.5)" class="px-3 py-1 text-xs bg-slate-100 hover:bg-slate-200 rounded text-slate-600 transition">Medium (0.5)</button>
                        <button onclick="setAngle(1.0)" class="px-3 py-1 text-xs bg-slate-100 hover:bg-slate-200 rounded text-slate-600 transition">Large (1.0)</button>
                    </div>
                </div>

                <!-- Analysis Card -->
                <div class="bg-white rounded-xl shadow-lg border border-slate-100 p-6">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 border-b pb-2">Numerical Analysis</h3>
                    
                    <div class="grid grid-cols-2 gap-4 text-center mb-6">
                        <div class="bg-emerald-50 p-3 rounded-lg border border-emerald-100">
                            <div class="text-xs text-emerald-600 uppercase font-bold tracking-wider mb-1">x (Radians)</div>
                            <div id="val-x" class="text-xl md:text-2xl font-mono text-emerald-700 font-bold">0.0000</div>
                            <div id="val-deg" class="text-xs text-emerald-400 font-mono mt-1">0.00°</div>
                        </div>
                        <div class="bg-rose-50 p-3 rounded-lg border border-rose-100">
                            <div class="text-xs text-rose-600 uppercase font-bold tracking-wider mb-1">sin(x)</div>
                            <div id="val-sin" class="text-xl md:text-2xl font-mono text-rose-700 font-bold">0.0000</div>
                        </div>
                    </div>

                    <div class="bg-slate-800 text-white rounded-lg p-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm opacity-70">Absolute Error (|x - sin x|)</span>
                            <span id="val-diff" class="font-mono text-indigo-300">0.00000</span>
                        </div>
                        <div class="flex justify-between items-center pt-2 border-t border-slate-700">
                            <span class="text-sm font-bold text-yellow-400">Percent Error</span>
                            <span id="val-error" class="font-mono text-xl text-yellow-400 font-bold">0.00%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-100 border-t border-slate-200 py-6 mt-6">
        <div class="max-w-6xl mx-auto px-4 text-center text-slate-500 text-sm">
            Interactive demonstration generated for educational purposes.
        </div>
    </footer>

    <script>
        // --- State ---
        let currentAngle = 0.2; // Radians

        // --- DOM Elements ---
        const slider = document.getElementById('angleSlider');
        const valX = document.getElementById('val-x');
        const valDeg = document.getElementById('val-deg');
        const valSin = document.getElementById('val-sin');
        const valDiff = document.getElementById('val-diff');
        const valError = document.getElementById('val-error');
        
        const circleCanvas = document.getElementById('circleCanvas');
        const graphCanvas = document.getElementById('graphCanvas');
        
        const circleCtx = circleCanvas.getContext('2d');
        const graphCtx = graphCanvas.getContext('2d');

        // --- Resize Handling ---
        function resizeCanvas(canvas, containerId) {
            const container = document.getElementById(containerId);
            const dpr = window.devicePixelRatio || 1;
            canvas.width = container.clientWidth * dpr;
            canvas.height = container.clientHeight * dpr;
            
            // Normalize coordinate system to handle scaling simply
            // We won't use scale() on context to keep drawing logic distinct, 
            // but we need to know these dimensions.
            return { w: canvas.width, h: canvas.height };
        }

        // --- Drawing: Unit Circle ---
        function drawUnitCircle() {
            const { w, h } = resizeCanvas(circleCanvas, 'circle-container');
            
            // Settings
            const cx = w / 2;
            const cy = h / 2;
            const radius = Math.min(w, h) * 0.35; // Size of circle relative to canvas
            const angle = currentAngle;

            // Clear
            circleCtx.clearRect(0, 0, w, h);
            
            // Draw Axes
            circleCtx.beginPath();
            circleCtx.strokeStyle = '#e2e8f0';
            circleCtx.lineWidth = 1;
            circleCtx.moveTo(0, cy); circleCtx.lineTo(w, cy); // X axis
            circleCtx.moveTo(cx, 0); circleCtx.lineTo(cx, h); // Y axis
            circleCtx.stroke();

            // Draw Unit Circle
            circleCtx.beginPath();
            circleCtx.strokeStyle = '#94a3b8';
            circleCtx.lineWidth = 2;
            circleCtx.arc(cx, cy, radius, 0, 2 * Math.PI);
            circleCtx.stroke();

            // Calculate point P
            // Canvas Y is inverted (positive down), so we subtract sin component
            const px = cx + radius * Math.cos(angle);
            const py = cy - radius * Math.sin(angle); // Inverted Y for visual correctness with standard math

            // Draw Radius Line
            circleCtx.beginPath();
            circleCtx.strokeStyle = '#64748b'; // Slate 500
            circleCtx.setLineDash([5, 5]);
            circleCtx.moveTo(cx, cy);
            circleCtx.lineTo(px, py);
            circleCtx.stroke();
            circleCtx.setLineDash([]);

            // Draw Angle Arc (x) - The visual representation of the radian value
            // We draw this on the perimeter
            circleCtx.beginPath();
            circleCtx.strokeStyle = '#10b981'; // Emerald 500
            circleCtx.lineWidth = 4;
            // Arc goes from 0 to angle. Remember canvas angles go clockwise for positive.
            // But we want standard math look (counter-clockwise positive).
            // So start angle 0, end angle -angle (because y is flipped)
            circleCtx.arc(cx, cy, radius, 0, -angle, angle > 0); 
            circleCtx.stroke();

            // Draw Sine Line (Vertical) - The value of sin(x)
            circleCtx.beginPath();
            circleCtx.strokeStyle = '#f43f5e'; // Rose 500
            circleCtx.lineWidth = 4;
            circleCtx.moveTo(px, py);
            circleCtx.lineTo(px, cy);
            circleCtx.stroke();

            // Draw connecting line to center (Cosine) - just for context, faint
            circleCtx.beginPath();
            circleCtx.strokeStyle = '#e2e8f0';
            circleCtx.lineWidth = 1;
            circleCtx.moveTo(px, cy);
            circleCtx.lineTo(cx, cy);
            circleCtx.stroke();

            // Labels
            circleCtx.fillStyle = '#1e293b';
            circleCtx.font = 'bold 14px sans-serif';
            circleCtx.fillText('1', cx + radius/2, cy + 20); // Radius label roughly

            // Point P dot
            circleCtx.beginPath();
            circleCtx.fillStyle = '#4f46e5'; // Indigo
            circleCtx.arc(px, py, 4, 0, 2 * Math.PI);
            circleCtx.fill();
        }

        // --- Drawing: Function Graph ---
        function drawGraph() {
            const { w, h } = resizeCanvas(graphCanvas, 'graph-container');

            const cx = w / 2;
            const cy = h / 2;
            
            // Scale: How many pixels per unit (radian)?
            // Match slider range (-PI/2 to PI/2, approx +/- 1.57).
            // We use min(w, h) / 4 to get a range of roughly +/- 2.0 units, 
            // which fits +/- 1.57 comfortably with padding.
            const scale = Math.min(w, h) / 4; 
            const scaleX = scale; 
            const scaleY = scale; // Keep aspect ratio 1:1

            // Clear
            graphCtx.clearRect(0, 0, w, h);

            // Draw Axes
            graphCtx.beginPath();
            graphCtx.strokeStyle = '#cbd5e1';
            graphCtx.lineWidth = 1;
            graphCtx.moveTo(0, cy); graphCtx.lineTo(w, cy); // X axis
            graphCtx.moveTo(cx, 0); graphCtx.lineTo(cx, h); // Y axis
            graphCtx.stroke();

            // Draw y = x (The line)
            graphCtx.beginPath();
            graphCtx.strokeStyle = '#10b981'; // Emerald 500 (Matches arc)
            graphCtx.lineWidth = 3;
            // Draw from x = -4 to x = 4 to ensure coverage even on wide screens
            graphCtx.moveTo(cx + (-4) * scaleX, cy - (-4) * scaleY);
            graphCtx.lineTo(cx + (4) * scaleX, cy - (4) * scaleY);
            graphCtx.stroke();

            // Draw y = sin(x) (The curve)
            graphCtx.beginPath();
            graphCtx.strokeStyle = '#f43f5e'; // Rose 500 (Matches vertical line)
            graphCtx.lineWidth = 3;
            
            // Plot points
            const step = 0.1;
            for (let x = -4; x <= 4; x += 0.05) {
                const plotX = cx + x * scaleX;
                const plotY = cy - Math.sin(x) * scaleY;
                if (x === -4) graphCtx.moveTo(plotX, plotY);
                else graphCtx.lineTo(plotX, plotY);
            }
            graphCtx.stroke();

            // Draw Current Point
            const pX = cx + currentAngle * scaleX;
            const pY_sin = cy - Math.sin(currentAngle) * scaleY;
            const pY_lin = cy - currentAngle * scaleY;

            // Dotted line connecting them
            graphCtx.beginPath();
            graphCtx.setLineDash([3, 3]);
            graphCtx.strokeStyle = '#64748b';
            graphCtx.moveTo(pX, pY_lin);
            graphCtx.lineTo(pX, pY_sin);
            graphCtx.stroke();
            graphCtx.setLineDash([]);

            // Points
            // Sin Point
            graphCtx.beginPath();
            graphCtx.fillStyle = '#f43f5e';
            graphCtx.arc(pX, pY_sin, 5, 0, Math.PI * 2);
            graphCtx.fill();

            // Linear Point
            graphCtx.beginPath();
            graphCtx.fillStyle = '#10b981';
            graphCtx.arc(pX, pY_lin, 5, 0, Math.PI * 2);
            graphCtx.fill();

            // Legend on Graph
            graphCtx.font = '12px sans-serif';
            graphCtx.fillStyle = '#10b981';
            graphCtx.fillText('y = x', w - 50, 30);
            graphCtx.fillStyle = '#f43f5e';
            graphCtx.fillText('y = sin(x)', w - 70, 50);
        }

        // --- Logic & Updates ---
        function updateStats() {
            const x = currentAngle;
            const sinX = Math.sin(x);
            const diff = Math.abs(x - sinX);
            
            // Avoid division by zero
            let percentError = 0;
            if (Math.abs(x) > 0.000001) {
                percentError = (diff / Math.abs(x)) * 100;
            }

            // Update Text
            valX.textContent = x.toFixed(4);
            valDeg.textContent = (x * (180/Math.PI)).toFixed(1) + "°";
            valSin.textContent = sinX.toFixed(4);
            valDiff.textContent = diff.toFixed(5);
            valError.textContent = percentError.toFixed(2) + "%";
        }

        function updateAll() {
            requestAnimationFrame(() => {
                drawUnitCircle();
                drawGraph();
            });
            updateStats();
        }

        function setAngle(val) {
            currentAngle = val;
            slider.value = val;
            updateAll();
        }

        // --- Event Listeners ---
        slider.addEventListener('input', (e) => {
            currentAngle = parseFloat(e.target.value);
            updateAll();
        });

        window.addEventListener('resize', updateAll);

        // --- Initialization ---
        // Trigger initial draw
        updateAll();

    </script>
</body>
</html>
